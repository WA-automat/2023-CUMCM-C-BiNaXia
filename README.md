# 2023-CUMCM-C-BiNaXia

## 国赛C题过程思路

### 数据预处理

1. 缺失值异常值处理

### 问题一

1. 检验数据正态性（绘图：直方图、QQ图）
2. 检验序列是否线性（绘图）

对单品和品类：使用==spearman相关系数==进行相关性分析（无正态性或非线性，若正态且线性，使用pearson）

对品类：（对单品的话太多了）

1. 检验各个品类之间是否为==同阶单整==数据（如果都不是，那就重新想想别的方法）
2. 对同阶单整的品类使用==协整检验==（是否有长期均衡关系）和==格兰杰因果检验==（检查两时序是否有因果关系）

### 问题二

1. 计算每天各个单品对其品类的权重（可以使用==售出额+spearman==来判断），通过权重计算卖出的加权价格与加权损耗率；

假设时间为$t$，当天购入量为$x_t$，打折前卖出加权价格为$c_t$，打折后卖出加权价格为$c_t^‘$，损耗率为$p_t$。

假设当天售出量为$n_t$，构造一个函数$g$，自变量为时间与加权定价，因变量为预计售出量。

2. 使用==季节性（若有）的时间序列模型==构建回归预测函数$g$；

规划目标：$argmax(\Sigma(P-C))$

对每个品类有如下对策：
$$
n_1 = g(t,c_t) \\
n_2 = g(t, c_t^‘) \\
n_t = n_1(1 - p_t) + n_2p_t \\
x_t = n_t > 0 \\
P = \Sigma_{i=1}^7n_tc_t \\
C = \Sigma_{i=1}^7x_td_t
$$

3. 使用模拟退火、牛顿法、梯度下降法、遗传算法等方法求解上述==规划==。

### 问题三

1. 找到6月24-30日可售单品；

2. 计算上述单品的$g$函数；

3. 规划：

假设时间为$t$，当天购入量为$x_t$，打折前卖出加权价格为$c_t$，打折后卖出加权价格为$c_t^‘$，损耗率为$p_t$。

假设最终选择的单品总数为$N$，最小陈列量$M$（$M = 2.5kg$），当天售出量为$n_t$

规划目标：$argmax(\Sigma_{i=1}^N(P_i-C_i))$
$$
27\le N\le 33
$$
对每个单品有如下对策：
$$
n_1 = g(t,c_t) \\
n_2 = g(t, c_t^‘) \\
n_t = n_1(1 - p_t) + n_2p_t \\
x_t = n_t > M \\
P = \Sigma_{i=1}^7n_tc_t \\
C = \Sigma_{i=1}^7x_td_t \\
$$

4. 使用模拟退火、牛顿法、梯度下降法、遗传算法等方法求解上述==规划==。

### 问题二与问题三中 $g$ 函数的构造

输入：第$t$天的定价

输出：第$t$天的购买量

构建 $VAR$ 或 $VARMA$（若有季节性，可以引入季节性参数）

### 问题四

